<!DOCTYPE html>
<html lang="en">

    <%- include('../partials/admin/headAdmin') %> 

<body>
    
    <%- include('../partials/admin/headerAdmin')  %> 

    <main>
        <h2 class="titulo">Editar: <%= product.name %> </h2>            
        <div class="register">
            <form class="form-register" action="/admin/producto/editar/<%= product.id %>?_method=PUT" method="POST" class="form-register" enctype="multipart/form-data">
                    <div class="register-input">
                        <label for="name">Nombre de producto</label>
                        <input id="nameProduct" type="text" name="name" class="input-style" placeholder="Ingrese nombre de producto" value="<%= (locals.old && old.name)? old.name : product.name %>">
                        <small id="nameError" class="alert-msg"><%= (locals.errors && errors.name)? errors.name.msg : "" %></small>
                    </div>
                    <div class="register-input">
                        <label for="marca">Marca</label>
                        <input type="text" name="marca" id="marca" class="input-style" placeholder="Ingrese marca" value="<%= (locals.old && old.marca)? old.marca : product.marca %>">
                        <small id="marcaError" class="alert-msg"><%= (locals.errors && errors.name)? errors.name.msg : "" %></small>
                    </div>
                    <div class="register-input">
                        <label for="price">Precio</label>
                        <input type="number" name="price" id="price" class="input-style" placeholder="Ingrese precio" value="<%= (locals.old && old.price)? old.price : product.price%>">
                        <small id="priceError" class="alert-msg">
                        <%= (locals.errors && errors.price)? errors.price.msg : "" %>
                        </small>
                    </div>
                    <div class="register-input">
                        <label for="stock">Stock</label>
                        <input type="number" name="stock" id="stock" class="input-style" placeholder="cantidad de stock" value="<%= (locals.old && old.stock)? old.stock : product.stock %>">
                        <small id="stockError" class="alert-msg"><%= (locals.errors && errors.stock)? errors.stock.msg : "" %></small>
                    </div>
                    <div class="register-input">
                        <label for="discount">Descuento</label>
                        <input type="number" name="discount" id="discount" class="input-style" value="<%= (locals.old && old.discount)? old.discount : product.discount %>">
                        <small id="discError" class="alert-msg"><%= (locals.errors && errors.discount)? errors.discount.msg : "" %></small>
                    </div>
                    <div class="register-input">
                        <label for="categoryid">Categoria</label>
                        <select name="categoryid" id="select" class="input-style">
                            <% let categoryName = categories.find(category => category.id === product.categoryid)%>
                            <option value="<%= categoryName.id %>" selected hidden><%= categoryName.nombre %></option>
                            <% categories.forEach(category => { %>
                                <option value="<%= category.id %> "><%= category.nombre %></option>
                            <% }) %> 
                        </select>
                        <small id="catError" class="alert-msg"><%= (locals.errors && errors.categoryid)? errors.categoryid.msg : "" %> </small>
                    </div>
                    <div class="register-input">
                        <label for="image">Subir imagen</label>
                        <div class="img-container" id="img-preview">
                        </div>
                        <input type="file" id="input-Product" name="image" value="<%= product.image %>" accept=".jpg, .jpeg, .png">
                        <small class="alert-msg" id="inputImageError"></small> 
                    </div>
                    <div class="register-input">
                        <label for="description">Detalles</label>
                        <textarea type="description" name="description" id="description" cols="30" rows="3"><%= (locals.old && old.description)? old.description : product.description %></textarea>
                        
                        <small id="descripcionError" class="alert-msg"><%= (locals.errors && errors.description)? errors.description.msg : "" %></small>
                        
                    </div> 
                    <div class="btn_register">
                        <button type="submit" class="btn-submit_register">Agregar</button>
                        <span class="admin"><a class="admin" href="/admin">Volver</a></span>
                        <p id="FormError" class="alert-msg"></p>
                     </div>
             </form>
        </div>
    </main>
    <footer> 

        <ul class="social_icon">
            <li><a href="https://www.facebook.com/">
                    <ion-icon name="logo-facebook">
                        </ion-icon.com>
                </a></li>
            <li><a href="https://twitter.com/?lang=es">
                    <ion-icon name="logo-twitter"></ion-icon>
                </a></li>
            <li><a href="https://www.instagram.com/?hl=es-la">
                    <ion-icon name="logo-instagram"></ion-icon>
                </a></li>
            <li><a href="https://www.youtube.com/">
                    <ion-icon name="logo-youtube"></ion-icon>
                </a></li>
    
        </ul>
        <ul class="menu">
            <li><a href="https://www.mercadopago.com.ar/">MercadoPago</a></li>
            <li><a href="https://www.masterconsultas.com.ar/"> Master Card</a></li>
            <li><a href="https://www.visa.com.ar/">Visa</a></li>
            <li><a href="https://www.e-pagofacil.com/">PagoFacil</a></li>
        </ul>
        <p>Comision 13 - Grupo 11 - &#169; Derechos Reservados.</p>
    </footer>
    <script src="/js/editproductValidation.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
</body>
</html>